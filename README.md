# Биржевой бот #
Telegram-бот для получения актуальных сводок по криптовалютам и ценным бумагам с возможностью построения графиков. <br>


    

### Синхронный WebSocket-сервер ###
Сервер собирает и обрабатывает данные криптобирж Binance, Bybit, BitMart, KuCoin и фондовых бирж <...>. 

Код сервера содержится в файле server.py 

Сервер запускается командой `python server.py` из корневого каталога проекта.

+ IP: 127.0.0.1
+ Порт: 8765
+ Протокол: ws

#### WebSocket-сервер API ####
Для получения данных с сервера необходимо отправить запрос по адресу 127.0.0.1:8765 и протоколу WebSocket в виде JSON-строки, включающей в себя следующие параметры:

+ type(обязательный): указывает тип потока данных, отправляемых сервером // написать про поддерживаемые типы ticker_stream, exchange_stream, klines_stream
+ data(обязательный): параметры запроса к бирже. Каждый type определяет свой data  // для каждого типа написать какие
+ count(необязательный): количество запросов к бирже, которое необходимо сделать. По умолчанию: 1
+ timeout(необязательный): задержка между запросами к бирже. По умолчанию: 1 секунда

Возможные значения type:
1. ticker_stream. Отправляет стоимость и изменение за 24 часа тикера ticker. Дополнительные параметры: exchange - названия бирж, с который необходимо получить данные
2. exchange_stream. Отправляет стоимость и изменение за 24 часа всех тикеров биржи exchange. Дополнительные параметры: нет
3. klines_stream. Отправляет список стоимостей тикера ticker за указанный период для построения графиков. Дополнительные параметры: interval, limit

Пример корректного запроса для получения данных о тикере BTC-USDT биржи Bybit 5 раз с интервалом 10 секунд:

```
{
"type":"ticker_stream",
"data":
    {
    "ticker":"BTC-USDT",
    "exchange":"Bybit"
    },
"timeout":10,
"count":5
}
```
#### Ответы сервера ####

Обычный ответ сервера является JSON-текстом и содержит обработанные в соотвествии с стандартом (*) данные. 

Если в процессе работы возникает ошибка, сервер возвращает код ошибки и её краткое описание. 

Список ошибок:

+ WRF 0x01 (Wrong Request Format 0x01): запрос, принятый сервером, не соответствует формату JSON
+ RPM 0x01 (Required Parameter Missed 0x01): в запросе не указан параметр type
+ RPM 0x02 (Required Parameter Missed 0x02): в запросе не указан параметр data
+ BExR 0x01 (Bad Exchange Response 0x01): ответ биржи не соответствует шаблону или имеет код ошибки
+ WPV 0x01 (Wrong Parameter Value 0x01): некоторые из параметров имеют некорректное значение или тип данных
+ WPV 0x02 (Wrong Parameter Value 0x02): параметр ticker не содержит обязательного разделителя `-`


